{% extends "base.html" %}
{% block title %}Editar Livro{% endblock %}

{% block content %}
<h2 class="mb-4">Editar Livro</h2>

<form method="post">
  <div class="mb-3">
    <label for="titulo" class="form-label">Título</label>
    <input
      type="text"
      id="titulo"
      name="titulo"
      class="form-control"
      value="{{ livro.Titulo }}"
      required
    >
  </div>

  <div class="mb-3">
    <label for="autor_id" class="form-label">Autor</label>
    <select name="autor_id" id="autor_id" class="form-select" required>
      {% for autor in autores %}
      <option value="{{ autor.ID_autor }}" {% if autor.ID_autor == livro.Autor_id %}selected{% endif %}>
        {{ autor.Nome_autor }}
      </option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-3">
    <label for="isbn" class="form-label">ISBN</label>
    <input
      type="text"
      id="isbn"
      name="isbn"
      class="form-control"
      maxlength="13"
      value="{{ livro.ISBN }}"
      required
    >
  </div>

  <div class="mb-3">
    <label for="ano" class="form-label">Ano de Publicação</label>
    <input
      type="number"
      id="ano"
      name="ano"
      class="form-control"
      value="{{ livro.Ano_publicacao }}"
    >
  </div>

  <div class="mb-3">
    <label for="genero_id" class="form-label">Gênero</label>
    <select name="genero_id" id="genero_id" class="form-select" required>
      {% for genero in generos %}
      <option value="{{ genero.ID_genero }}" {% if genero.ID_genero == livro.Genero_id %}selected{% endif %}>
        {{ genero.Nome_genero }}
      </option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-3">
    <label for="editora_id" class="form-label">Editora</label>
    <select name="editora_id" id="editora_id" class="form-select" required>
      {% for editora in editoras %}
      <option value="{{ editora.ID_editora }}" {% if editora.ID_editora == livro.Editora_id %}selected{% endif %}>
        {{ editora.Nome_editora }}
      </option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-3">
    <label for="quantidade" class="form-label">Quantidade Disponível</label>
    <input
      type="number"
      id="quantidade"
      name="quantidade"
      class="form-control"
      min="0"
      value="{{ livro.Quantidade_disponivel }}"
    >
  </div>

  <div class="mb-3">
    <label for="resumo" class="form-label">Resumo</label>
    <textarea id="resumo" name="resumo" class="form-control" rows="4">{{ livro.Resumo }}</textarea>
  </div>

  <button type="submit" class="btn btn-primary">Atualizar</button>
  <a href="{{ url_for('listar_livros') }}" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}
